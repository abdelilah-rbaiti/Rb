@Library('jenkins_shared_library@main') _
pipeline {
    agent any
    stages {
        stage('Git Checkout') {
                steps {
                    script {
                        gitCheckout(
                            branch: 'main',
                            url: 'https://github.com/abdelilah-rbaiti/Rb.git'
                        )
                    }
                }
            } 
                 stage('Unit Tests') {
                    steps {
                        script {
                            myUnitTests.runUnitTests()
                }
            }
        }
                stage('Integration Tests') {
                    steps {
                        script {                    
                            myIntegrationTests.runIntegrationTests()
                }
            }
        }
              stage('SonarQube Analysis') {
            steps {
                sonarqube(sonarServer: 'sonarqube-jenkins') // No need to specify the credential ID here
            }
        }

    }
}

